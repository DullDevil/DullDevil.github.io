---
title: iOS方法交换
categories: [基础知识]
---

[交换类方法](http://stackoverflow.com/questions/3267506/how-to-swizzle-a-class-method-on-ios)

```objective_c
void SwizzleClassMethod(Class c, SEL orig, SEL new) {    
    Method origMethod = class_getClassMethod(c, orig);
    Method newMethod = class_getClassMethod(c, new);
    c = object_getClass((id)c);
    if(class_addMethod(c, orig, method_getImplementation(newMethod), method_getTypeEncoding(newMethod))) {
        class_replaceMethod(c, new, method_getImplementation(origMethod), method_getTypeEncoding(origMethod));
    } else {
        method_exchangeImplementations(origMethod, newMethod);
    }
}
```

交换实例方法

```objective_c
void SwizzleInstanceMethod(Class c, SEL orig, SEL new) {
    Method origMethod = class_getInstanceMethod(c, orig);\
    Method newMethod = class_getInstanceMethod(c, new);\
    BOOL didAddMethod = class_addMethod(c, orig,method_getImplementation(newMethod),method_getTypeEncoding(newMethod));
    if (didAddMethod) {
        class_replaceMethod(c, new, method_getImplementation(origMethod), method_getTypeEncoding(origMethod));
    } else {
        method_exchangeImplementations(origMethod, newMethod);
    }
}
```
