---
title: swift 基础：可选值
categories: [Swift]
---


在任何类型之后紧跟 `?` ，即表示可选类型。可选类型的变量可以处理“值缺失”的情况，也就是变量可以设置为 nil，也只有可选类型的变量才能设置为 nil。
```
let x: Int? = 10
let y: Int? = nil
```
**强制解析**  

Int? 类型与 Int 类型是两种不同的类型，不能把 Int? 类型的变量或常量直接赋值给 Int 类型的变量。为了获取可选类型实际存储的值，可以在后面添加 `!` 进行解析，这种解析被称为强制解析。

```
let x: Int? = 10
let y: Int = x!
```

但是这种强制解析是有风险的，如果被解析的变量或常量并没有存储值，也就是为nil，则强制解析就会失败，导致程序崩溃。为了保证强制解析的安全，在强制解析之前需要进行一次判断。 
```
let x: Int? = 10
if x != nil {
    let y: Int = x!
}
```

**可选绑定**

可选绑定用于判断可选类型的变量或常量时候有值，如果有值就赋值给一个临时的变量或常量。

```
let x: Int? = 10
if let y = x {
    print("\(y)")
}
```

除了 `if let`之外，还有一种方案：`guard let ··· else`

```
guard let y = x else {
    return
}
print("\(y)")
```

两种方案的区别在于临时变量的作用域：第一种方案的作用域在紧跟的大括号内，第二种方案的作用域在大括号外。


**隐式可选类型**

除了在类型的后面添加`?`表示可选之后，还可以在类型的后面添加`!`来表示可选类型。
```
let x: Int! = 10
```

Int? 与 Int! 的区别是：当需要获取 Int? 类型的值时，需要在变量名后面添加 `!`执行强制解析；当需要获取 Int! 类型的值时，无需添加`!`，程序会自动执行隐式解析。但是这样同样是有风险，如果变量为空，隐式解析同时会崩溃。
