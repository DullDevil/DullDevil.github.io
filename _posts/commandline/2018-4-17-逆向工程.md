---
title: Mac命令行：逆向工程
categories: [命令行]
---

- TOC
{:toc}

#### 检验app是否加密

```
otool -l /Users/limingwei/Desktop/wechat/WeChat | grep crypt

cryptoff 16384
cryptsize 45678592
cryptid 0
```

#### 导出头文件

```
class-dump -H /Users/limingwei/Desktop/resign/WeChat.decrypted -o /Users/limingwei/Desktop/resign/classdump 
```


#### lipo 分离/合并 ARMV7、ARM64架构dylib

```
分离
lipo -thin armv7 xxxx.dylib -output xxxx_v7.dylib
lipo -thin arm64  xxxx.dylib -output xxxx_64.dylib
合并
lipo -create ./xxxx_v7.dylib ./xxxx_64.dylib -output ./xxxx.dylib
```


#### 查看依赖库

```shell
otool -L /Users/limingwei/Desktop/wechat/WeChat.dylib
```

#### 动态注入

```shell
install_name_tool -add_rpath @loader_path/libsunstrate.dylib /Users/limingwei/Desktop/wechat/WeChat.dylib
```

#### 重签名

```shell
./ios_resign_from_app_to_ipa app-extracted "iPhone Distribution: Hangzhou Jing CAI Network Technology Co., Ltd" embedded.mobileprovision resign.ipa
```

#### 生成Tweak.xm

```shell
logify.pl /path/to/BaseMsgContentViewController.h > /out/to/Tweak.xm
```

#### 查看页面视图层级

进入 #cy 模式

```shell
cycript -p 进程序列号
```

打印页面视图层级

```shell
#cy UIApp.keyWindow.recursiveDescription().toString()
```
